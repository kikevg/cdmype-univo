extends ../shared.pug

block breadcrumbItem
    li.breadcrumb-item
        a(href="/admin/home") Inicio
    li.breadcrumb-item.active
        span Noticias
block content
    section

        include ../../common/buttonChangeView.pug

        include ../../common/messages.pug

        .view-list
            .card
                .card-header
                    h2.card-title Lista de noticias
                .card-body.table-responsive
                    table.table.table-bordered
                        thead
                            tr
                                th NÂº
                                th Titulo
                                th Fecha de publicacion
                                th Acciones
                        tbody
                            if data.length > 0
                                each val, i in data
                                    tr
                                        td= i + 1
                                        td= val.title
                                        td= val.date
                                        td
                                            div.btn-group
                                                a(href="/admin/news/details/" + val.id class="btn btn-light" title="info")
                                                    i.fa.fa-info.text-dark
                                                a(href="/admin/news/update/" + val.id class="btn btn-light" title="editar")
                                                    i.fa.fa-edit.text-dark
                                                a(href="/admin/news/delete/" + val.id class="btn btn-light" title="borrar")
                                                    i.fa.fa-trash.text-danger
        div(class="d-none view-grid")
            .card-columns
                each val,i in data
                    .card
                        if val.images.length > 1
                            div(id="carousel-news" + i class="carousel slide" data-ride="carousel")
                                .carousel-inner
                                    - let j = 0;
                                    each img in val.images
                                        - let classActive = (j == 0) ? "active" : "";
                                        div(class="carousel-item " + classActive)
                                            img(src= img alt="" class="d-block w-100 rounded-top")
                                        - j = 1;
                                a(href="#carousel-news" + i class="carousel-control-prev" role="button" data-slide="prev")
                                    i.fas.fa-chevron-left
                                a(href="#carousel-news" + i class="carousel-control-next" role="button" data-slide="next")
                                    i.fas.fa-chevron-right
                        else
                            img(src= val.images[0], alt="" class="card-img-top")
                        .card-body
                            h4.card-title= val.title
                            br
                            p.text-muted= val.date
                            div.btn-group.btn-group-sm
                                a(href="/admin/news/details/" + val.id class="btn btn-light" title="info")
                                    i.fa.fa-info.text-dark
                                a(href="/admin/news/update/" + val.id class="btn btn-light" title="editar")
                                    i.fa.fa-edit.text-dark
                                a(href="/admin/news/delete/" + val.id class="btn btn-light" title="borrar")
                                    i.fa.fa-trash.text-danger

block scripts
    script(src="/public/js/changeview.js")
